<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SOTN2 Interactive Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h2>Interactive Map SOTN2</h2>
  <div id="met-controls">
	<button id="activate-met">Activate MET</button>
	<button id="exit-met" disabled>Exit MET</button>
	<button id="add-marker" disabled>Add Marker</button>
    <button id="save-changes" disabled>Save Changes</button>
  </div>
  <div id="auth-container">
    <button id="login-button">Login via GitHub</button>
    <span id="username-display"></span>
  </div>
  
  <div id="map"></div>
  <template id="marker-form-template">
	<form id="marker-form">
		<label>Title:
			<input name="title"
				value="${isNew ? '' : marker.options.name}"
				placeholder="${isNew ? 'Name_PlaceHolder' : ''}"
				required
			/>
		</label>
		<label>Description
				<textarea name="description"
				maxlength="60"
				placeholder="${isNew ? 'Description_PlaceHolder' : ''}"
			>${isNew ? '' : marker.options.description}</textarea>
		</label>
		<label>Category
			<select name="category">
				${isNew
					? `<option value="" selected>none</option>`
					: `<option value="">none</option>`
				}
				${categories.map(cat =>
					`<option value="${cat.id}"
					${!isNew && cat.id == marker.options.category_id ? 'selected' : ''}
					>${cat.label}</option>`
				).join('')}
			</select>
		</label>
		<label>Icon
			<select name="icon">
				${isNew
					? `<option value="" selected>default</option>`
					: `<option value="">default</option>`
				}
				${iconsData.map(ic =>
					`<option value="${ic.id}"
					${!isNew && ic.id == marker.options.icon_id ? 'selected' : ''}
					>${ic.name}</option>`
				).join('')}
			</select>
		</label>
		<label>Y
			<input type="number" name="lat"
			value="${isNew ? latlng.lat : marker.getLatLng().lat}"
			step="any" required />
		</label>
		<label>X
			<input type="number" name="lng"
			value="${isNew ? latlng.lng : marker.getLatLng().lng}"
			step="any" required />
		</label>
		
		<button type="button" id="submit-btn">
			${isNew ? 'Create' : 'Save'}
		</button>
		<button type="button" id="cancel-btn">
			${isNew ? 'Cancel' : 'Delete'}
		</button>
	</form>
  </template>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="scriptv2.js"></script>
</body>
</html>